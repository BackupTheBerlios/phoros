#+TITLE:     Phoros
#+AUTHOR:    Bert Burgemeister
#+EMAIL:     trebbu@googlemail.com
#+DESCRIPTION:
#+KEYWORDS: 
#+LANGUAGE:  en
#+OPTIONS:   H:3 num:nil toc:1 \n:nil @:t ::t |:t ^:t -:t f:t *:t <:t
#+OPTIONS:   TeX:nil LaTeX:nil skip:nil d:nil todo:t pri:nil tags:not-in-toc
#+OPTIONS:   author:t email:t creator:nil timestamp:t
#+STYLE:     <link rel="stylesheet" href="style.css" type="text/css"/>

#+ATTR_HTML: alt="Phoros logo" height="50" style="padding-top:.5em;float:right"
  [[file:phoros-logo-plain.png]]

A Tool for Photogrammetric Road Survey

* Workflow

  - Images and GPS data are acquired using a measuring vehicle. ([[http://www.tu-dresden.de/vkiva/strasse/messfahrzeug.html][Here]]
    is a working example.)

    Sequences of a few hundred images together with their trigger times are stored
    Huffman-encoded in files called =*.pictures=.  GPS data is
    preprocessed into a table of ASCII text.  The format of both image
    and GPS files is not (yet) explained here.

  - Cameras and GPS system need to be calibrated, which is not
    explained here.

  - Calibration parameters are stored into the database using the
    [[Command Line Interface]] (There, cf.
    =Camera Hardware Parameters= through
    =Camera Calibration Parameters=.)

  - GPS data and image information are fed into the database using
    option =--store-images-and-points= of the [[Command Line Interface]].

  - Presentation project users use the web interface to point in a map
    at a point of interest and are shown a couple of relevant images.
    In these images they point at features of interest the coordinates
    of which can be stored into the database.  (Storage not yet
    implemented; coordinates are just shown.)

* Command Line Interface

  The command line interface is used to

  - set up and manage projects,

  - store camera calibration parameters,

  - store measurement data (i.e., images and GPS positions),

  - manage presentation project users,

  - start Phoros as a presentation server (a web server presenting
    measurement data to presentation project users).

  Below is the output of
  #+BEGIN_SRC sh
  $ ./phoros --help
  #+END_SRC

#+INCLUDE "phoros-help.txt" example

* Web Interface

  (sorry, only dummy screenshots)

  #+CAPTION: Step 1: In map, point into an area of interest
  [[file:phoros-logo-plain.png]]

  #+CAPTION: Step 2: In first image, zoom in and point at a feature of interest.
  [[file:phoros-logo-plain.png]]

  You see [[http://en.wikipedia.org/wiki/Epipolar_line#Epipolar_line][epipolar lines]] in the other images.

  #+CAPTION: Step 3: In another image, zoom in and point at the same feature
  [[file:phoros-logo-plain.png]]

  #+CAPTION: Step 3: Map and images show estimated positions of the selected feature
  [[file:phoros-logo-plain.png]]

  Pointing at the feature in the remaining images improves accuracy of
  the estimated point.

* Download

  - Browse Phoros source code via [[http://git.berlios.de/cgi-bin/gitweb.cgi?p=phoros;a=summary][gitweb]].  

  - Browse source code of [[mailto:Steffen.Scheller.home@gmail.com][Steffen Scheller]]'s [[http://github.com/trebb/phoml][PhoML]] library, which is needed by Phoros.

  - Get everything:
    #+BEGIN_SRC sh
    $ git clone git://git.berlios.de/phoros
    $ cd phoros
    $ git submodule init
    $ git submodule update
    #+END_SRC

    The build process isn't perfect yet.  You'll (probably) need an x86-64 Debian
    system with [[http://beta.quicklisp.org][Quicklisp]] installed on top of [[http://www.sbcl.org][SBCL]].

* Acknowledgements

  - Phoros is implemented using [[http://sbcl.org][Steel Bank Common Lisp]], a Common Lisp implementation.

  - Communication with PostgrSQL is provided by [[http://marijnhaverbeke.nl/postmodern/][Postmodern]].

  - The presentation server is based on [[http://weitz.de/hunchentoot][Hunchentoot]].

  - Almost everything visible in the web browser looks as it does
    thanks to the [[http://openlayers.org][OpenLayers]] library, interfaced by [[http://common-lisp.net/project/parenscript/][Parenscript]] and
    [[http://common-lisp.net/project/cl-json/][CL-JSON]].

  - Without Steffen Scheller's photogrammetric library [[http://github.com/trebb/phoml][PhoML]] Phoros'
    presentation server couldn't do much beyond displaying
    geolocated images. 

  - Once decoded, images are turned into something a web browser can
    handle by [[http://www.xach.com/lisp/zpng/][ZPNG]].

  - It's a pleasure to have this project hosted at
    #+BEGIN_HTML:
    <a href="http://developer.berlios.de/projects/phoros"
    title="BerliOS Developer"> <img
    style="vertical-align:middle"
    src="http://developer.berlios.de/bslogo.php?group_id=12315"
    width="124px" height="32px" border="0" alt="BerliOS Developer
    Logo"></a>.
    #+END_HTML:

